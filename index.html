<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chinese Festival Countdown</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <img src="./logo.jpg" alt="Festival Logo" />
    
    <div class="panel">
        <div id="timer">0:10</div>
        <div class="button-group">
            <button class="btn-custom btn-start" onclick="startTimer()">开始</button>
            <button class="btn-custom btn-stop" onclick="stopTimer()">停止</button>
            <button class="btn-custom btn-reset" onclick="resetTimer()">重置</button>
        </div>
    </div>

    <script>
        let time = 10; // 10 seconds
        let interval;

        function updateDisplay() {
            let m = Math.floor(time / 60);
            let s = time % 60;
            document.getElementById("timer").innerText = `${m}:${s.toString().padStart(2,'0')}`;
        }

        function startTimer() {
            // Only start if interval is not already set (prevents multiple intervals)
            if (interval) return; 
            interval = setInterval(() => {
                if (time > 0) {
                    time--;
                    updateDisplay();
                } else {
                    clearInterval(interval);
                    interval = null;
                    animateTimeUp();
                }
            }, 1000);
        }

        function stopTimer() {
            clearInterval(interval);
            interval = null;
        }

        function resetTimer() {
            stopTimer();
            time = 10;
            updateDisplay();
            const timerEl = document.getElementById("timer");
            // Remove animation classes and reset styles
            timerEl.classList.remove("timeup");
            timerEl.style.opacity = 1;
            timerEl.style.transform = "scale(1)";
        }

        function animateTimeUp() {
            const timerEl = document.getElementById("timer");
            timerEl.innerText = "时间到!"; // Time's Up!
            timerEl.classList.add("timeup");
        }

        // Initial display when the page loads
        updateDisplay(); 
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>

